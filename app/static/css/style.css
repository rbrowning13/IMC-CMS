body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* Accent color placeholder, we'll wire from settings later */
.btn-primary {
  /* Bootstrap primary override if desired */
}

/* Accent‑driven button styling */
:root {
  --accent-color: #d6871f; /* fallback, replaced dynamically by settings */
}

/* Navbar tab accent styling (light & dark) */
.navbar .nav-link {
  border-bottom: 2px solid transparent;
  border-radius: 0; /* keep tabs flat against the bottom edge */
}

.navbar .nav-link.active {
  color: var(--accent-color) !important;
  border-bottom-color: var(--accent-color) !important;
}

/* Make all buttons pill-shaped */
.btn {
  border-radius: 999px !important;
}

/* Primary button = white fill + accent border/text */
.btn-primary,
.btn-primary:visited {
  background-color: #ffffff !important;
  color: var(--accent-color) !important;
  border: 2px solid var(--accent-color) !important;
}

.btn-primary:hover,
.btn-primary:focus {
  background-color: var(--accent-color) !important;
  color: #ffffff !important;
  border: 2px solid var(--accent-color) !important;
}

/* Accent button: solid accent background, white text */
.btn-accent,
.btn-accent:visited {
  background-color: var(--accent-color) !important;
  color: #ffffff !important;
  border: 2px solid var(--accent-color) !important;
}

.btn-accent:hover,
.btn-accent:focus {
  background-color: #ffffff !important;
  color: var(--accent-color) !important;
  border: 2px solid var(--accent-color) !important;
}

/* Outline primary matches same visual style */
.btn-outline-primary {
  background-color: #ffffff !important;
  color: var(--accent-color) !important;
  border: 2px solid var(--accent-color) !important;
}

.btn-outline-primary:hover,
.btn-outline-primary:focus {
  background-color: var(--accent-color) !important;
  color: #ffffff !important;
  border: 2px solid var(--accent-color) !important;
}

/* Print layout tuning for report and invoice previews */
@media print {
  body {
    background: #ffffff !important;
  }

  /* Hide navigation, alerts, and buttons when printing/creating PDF */
  nav.navbar,
  .navbar,
  .navbar * ,
  .alert,
  .no-print,
  .btn {
    display: none !important;
  }

  /* Main printable containers */
  .report-print-page,
  .invoice-print-page {
    margin: 0;
    padding: 0.75in 0.75in;
    width: 100%;
  }

  /* Avoid awkward page breaks around headings */
  .report-print-page h1,
  .report-print-page h2,
  .report-print-page h3,
  .invoice-print-page h1,
  .invoice-print-page h2,
  .invoice-print-page h3 {
    page-break-after: avoid;
  }

  /* Try to keep section blocks together */
  .report-print-page .section,
  .invoice-print-page .section {
    page-break-inside: avoid;
  }
}

/* Universal scroll-area styling */
.scroll-area {
  max-height: 260px;
  overflow-y: scroll !important; /* force persistent scrollbar */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: #c1c1c1 #f1f1f1; /* Firefox: thumb + track */
}

/* Chrome/Safari scrollbar styling */
.scroll-area::-webkit-scrollbar {
  width: 10px;
}

.scroll-area::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 5px;
}

.scroll-area::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 5px;
  border: 2px solid #f1f1f1;
}

.scroll-area::-webkit-scrollbar-thumb:hover {
  background: #a0a0a0;
}

html.dark-mode .scroll-area {
  scrollbar-color: #555 #1e1e1e;
}

html.dark-mode .scroll-area::-webkit-scrollbar-track {
  background: #1e1e1e;
}

html.dark-mode .scroll-area::-webkit-scrollbar-thumb {
  background: #555;
  border: 2px solid #1e1e1e;
}

/* --------------------------------------------- */
/* Reusable table scroll helpers (all themes)    */
/* --------------------------------------------- */

/* Compact table scroll area (e.g., billable items) */
.table-scroll-compact {
  max-height: 12rem;            /* roughly ~5 rows depending on content */
  overflow-y: auto;
}

/* Taller table scroll area (e.g., long claim/report lists) */
.table-scroll-tall {
  max-height: 20rem;
  overflow-y: auto;
}

/* Make sure scrollbars are visible and thin like other scroll areas */
.table-scroll-compact,
.table-scroll-tall {
  scrollbar-width: thin;              /* Firefox */
}

.table-scroll-compact::-webkit-scrollbar,
.table-scroll-tall::-webkit-scrollbar {
  width: 10px;
}

.table-scroll-compact::-webkit-scrollbar-track,
.table-scroll-tall::-webkit-scrollbar-track {
  background: #f1f1f1;
}

.table-scroll-compact::-webkit-scrollbar-thumb,
.table-scroll-tall::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 5px;
  border: 2px solid #f1f1f1;
}

html.dark-mode .table-scroll-compact::-webkit-scrollbar-track,
html.dark-mode .table-scroll-tall::-webkit-scrollbar-track {
  background: #1e1e1e;
}

html.dark-mode .table-scroll-compact::-webkit-scrollbar-thumb,
html.dark-mode .table-scroll-tall::-webkit-scrollbar-thumb {
  background: #555;
  border: 2px solid #1e1e1e;
}

/* ---------------------- */
/* Dark Mode Theme Layer  */
/* ---------------------- */

html.dark-mode body {
  background-color: #121212 !important;
  color: #e5e5e5 !important;
}

.card {
  border-width: 3px !important;
  border-style: solid !important;
}

html.dark-mode .card {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
  border-color: #333 !important;
  border-width: 3px !important;
  border-style: solid !important;
}

html.dark-mode .card-body {
  background-color: #1e1e1e !important;
}

/* Ensure all accordion shells and collapse areas are dark in dark mode */
html.dark-mode .accordion,
html.dark-mode .accordion-item,
html.dark-mode .accordion-collapse,
html.dark-mode .accordion-body,
html.dark-mode .collapse,
html.dark-mode .collapse.show {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
  border-color: #333 !important;
}

html.dark-mode .navbar,
html.dark-mode nav.navbar {
  background-color: #1f1f1f !important;
  border-bottom: 1px solid #333 !important;
}

html.dark-mode .navbar a,
html.dark-mode .navbar-brand,
html.dark-mode .nav-link {
  color: #e5e5e5 !important;
}

/* Dark-mode styling for collapsible section headers on Claim Detail, etc. */
html.dark-mode [data-bs-toggle="collapse"],
html.dark-mode .accordion-button,
html.dark-mode .accordion-header {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
  border-color: #333 !important;
}

html.dark-mode [data-bs-toggle="collapse"]:hover,
html.dark-mode .accordion-button:hover {
  background-color: #262626 !important;
}

.form-control,
input,
textarea,
select {
  border: 3px solid #333 !important;
}

/* -------------------------------------------------------------------------
   Light mode: force readable inputs (prevents OS-level dark scheme overrides)
   ------------------------------------------------------------------------- */
html:not(.dark-mode) .form-control,
html:not(.dark-mode) .form-select,
html:not(.dark-mode) input,
html:not(.dark-mode) textarea,
html:not(.dark-mode) select {
  background-color: #ffffff !important;
  color: #212529 !important;
}

html:not(.dark-mode) .form-control::placeholder,
html:not(.dark-mode) input::placeholder,
html:not(.dark-mode) textarea::placeholder {
  color: #6c757d !important;
  opacity: 1;
}

html:not(.dark-mode) .form-control:focus,
html:not(.dark-mode) .form-select:focus,
html:not(.dark-mode) input:focus,
html:not(.dark-mode) textarea:focus,
html:not(.dark-mode) select:focus {
  background-color: #ffffff !important;
  color: #212529 !important;
  border: 3px solid var(--accent-color) !important;
}

/* -------------------------------------------------------------------------
   Dark mode: form controls (inputs, selects, textareas)
   ------------------------------------------------------------------------- */
html.dark-mode input,
html.dark-mode textarea,
html.dark-mode select {
  color-scheme: dark;
}

html.dark-mode .form-control,
html.dark-mode .form-select,
html.dark-mode input[type="text"],
html.dark-mode input[type="email"],
html.dark-mode input[type="tel"],
html.dark-mode input[type="number"],
html.dark-mode input[type="search"],
html.dark-mode input[type="date"],
html.dark-mode textarea,
html.dark-mode select {
  background-color: #1e1e1e !important;
  color: #f1f1f1 !important;
  border-color: #3a3a3a !important;
}

html.dark-mode .form-control:focus,
html.dark-mode .form-select:focus,
html.dark-mode textarea:focus,
html.dark-mode select:focus,
html.dark-mode input:focus {
  background-color: #1e1e1e !important;
  color: #f1f1f1 !important;
  border: 3px solid var(--accent-color) !important;
  box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.12);
}

/* Option styling support varies by OS/browser, but helps where supported */
html.dark-mode select option {
  background-color: #1e1e1e;
  color: #f1f1f1;
}

html.dark-mode ::placeholder {
  color: rgba(241, 241, 241, 0.55);
}

/* Dark-mode placeholders */
html.dark-mode .form-control::placeholder,
html.dark-mode input::placeholder,
html.dark-mode textarea::placeholder,
html.dark-mode select::placeholder {
  color: #aaaaaa !important;
  opacity: 1; /* ensure consistent visibility */
}

html.dark-mode .form-control:focus,
html.dark-mode input:focus,
html.dark-mode textarea:focus,
html.dark-mode select:focus {
  background-color: #2f2f2f !important;
  color: #ffffff !important;
  border: 3px solid var(--accent-color) !important;
}

html.dark-mode .table {
  color: #e5e5e5 !important;
}

html.dark-mode .table th,
html.dark-mode .table td {
  background-color: #1e1e1e !important;
  border-color: #333 !important;
}

html.dark-mode .table thead th {
  background-color: #262626 !important;
  color: #e5e5e5 !important;
}

/* Stronger dark-mode overrides for all table text and borders */
html.dark-mode table,
html.dark-mode .table,
html.dark-mode table th,
html.dark-mode table td,
html.dark-mode .table th,
html.dark-mode .table td {
  color: #f1f1f1 !important;
  border-color: #444 !important;
}

html.dark-mode .table-hover tbody tr:hover {
  background-color: #2a2a2a !important;
  color: #ffffff !important;
}

html.dark-mode .table-striped tbody tr:nth-of-type(odd) {
  background-color: #1a1a1a !important;
}

html.dark-mode .table-striped tbody tr:nth-of-type(even) {
  background-color: #222 !important;
}

html.dark-mode .btn-primary,
html.dark-mode .btn-outline-primary {
  background-color: #1e1e1e !important;
  color: var(--accent-color) !important;
  border-color: var(--accent-color) !important;
}

html.dark-mode .btn-primary:hover,
html.dark-mode .btn-outline-primary:hover {
  background-color: var(--accent-color) !important;
  color: #ffffff !important;
}

/* Extra dark-mode overrides for Bootstrap utility classes */
html.dark-mode .bg-light,
html.dark-mode .bg-white,
html.dark-mode .table-light,
html.dark-mode .card-header,
html.dark-mode .card-footer,
html.dark-mode .card-body,
html.dark-mode .accordion-item {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
}

html.dark-mode .text-dark {
  color: #e5e5e5 !important;
}

html.dark-mode .text-muted {
  color: #aaaaaa !important;
}

html.dark-mode .badge.bg-light,
html.dark-mode .badge.bg-white {
  background-color: #333 !important;
  color: #f0f0f0 !important;
}

html.dark-mode .list-group-item {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
  border-color: #333 !important;
}

html.dark-mode .alert {
  background-color: #1e1e1e !important;
  color: #e5e5e5 !important;
  border-color: #444 !important;
}

html.dark-mode a {
  color: var(--accent-color) !important;
}

html.dark-mode a:hover {
  color: #ffffff !important;
}

/* Preserve accent color for active nav item in dark mode */
html.dark-mode .navbar .nav-link.active,
html.dark-mode .nav-link.active {
  color: var(--accent-color) !important;
  border-bottom-color: var(--accent-color) !important;
}

/* -------------------------------------------------- */
/* Accent‑colored collapse/accordion arrows (light & dark mode) */
/* -------------------------------------------------- */

/* Bootstrap uses an inline SVG for the arrow. We override it with our own
   that uses the CSS accent variable. */

/* Light mode arrow */
.accordion-button::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23d6871f' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='1 5 8 12 15 5'/%3E%3C/svg%3E") !important;
  transform: rotate(0deg);
}

/* Dark mode arrow (same accent color, but ensures visibility on dark BG) */
html.dark-mode .accordion-button::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23d6871f' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='1 5 8 12 15 5'/%3E%3C/svg%3E") !important;
}

/* When the accordion is open, Bootstrap rotates the arrow.
   We maintain that behavior but retain accent color. */
.accordion-button:not(.collapsed)::after {
  transform: rotate(180deg);
}

/* -------------------------------------------------------------------------
   Checkbox visual styling (light & dark mode)

   Bootstrap checkboxes can look “unchecked” in light mode if our global input
   styling overrides their checked background. Force the checked state to use
   the accent color and a visible checkmark in BOTH themes.
   ------------------------------------------------------------------------- */

/* Base checkbox appearance */
.form-check-input {
  width: 1.05rem;
  height: 1.05rem;
  border: 2px solid var(--accent-color) !important;
  background-color: #ffffff !important;
}

/* Checked state (light + dark) */
.form-check-input:checked {
  background-color: var(--accent-color) !important;
  border-color: var(--accent-color) !important;
}

/* Ensure the checkmark is visible (Bootstrap uses a background-image SVG) */
.form-check-input:checked {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3 6-7'/%3e%3c/svg%3e") !important;
}

/* Focus ring uses accent */
.form-check-input:focus {
  border-color: var(--accent-color) !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.08) !important;
}

html.dark-mode .form-check-input {
  background-color: #1e1e1e !important;
}

html.dark-mode .form-check-input:focus {
  box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.12) !important;
}

/* -------------------------------------------------------------------------
   Checkbox clickability fixes (Report Edit: Treating Providers + Barriers)

   We have a few scroll/card layouts where an overlay (or stacking context)
   can unintentionally intercept pointer events. These rules ensure checkbox
   inputs/labels remain clickable.
   ------------------------------------------------------------------------- */

/* Ensure checkbox rows remain interactive even inside scroll/positioned cards */
.form-check,
.form-check-input,
.form-check-label {
  pointer-events: auto;
}

/* Give the actual checkbox a small stacking priority so it isn't "under" an overlay */
.form-check-input {
  position: relative;
  z-index: 2;
}

/* Make sure labels are also clickable */
.form-check-label {
  position: relative;
  z-index: 1;
  cursor: pointer;
}

/* If a container was accidentally given pointer-events: none elsewhere, override it */
.scroll-area,
.card,
.card-body {
  pointer-events: auto;
}

/* --------------------------------------------------
   HARD OVERRIDE: ensure checkbox interactivity
   -------------------------------------------------- */

/* Never allow parent containers to swallow clicks */
.card *,
.card-body *,
.scroll-area *,
.accordion *,
.accordion-body * {
  pointer-events: auto !important;
}

/* Explicit checkbox + label behavior */
input[type="checkbox"] {
  position: relative;
  z-index: 5;
  pointer-events: auto !important;
}

label,
.form-check-label {
  cursor: pointer;
  pointer-events: auto !important;
}

/* Prevent accordion arrows or headers from overlaying form controls */
.accordion-button::after {
  pointer-events: none !important;
}

/* -------------------------------------------------------------------------
   Success message box styling (roll-forward + flash success)

   Spec:
   - Border: 10px solid accent color (both themes)
   - Light: white interior + black text
   - Dark: black interior + white text
   ------------------------------------------------------------------------- */

/* Light mode */
html:not(.dark-mode) .alert.alert-success {
  background-color: #ffffff !important;
  color: #111111 !important;
  border: 10px solid var(--accent-color) !important;
}

/* Dark mode */
html.dark-mode .alert.alert-success {
  background-color: #000000 !important;
  color: #ffffff !important;
  border: 10px solid var(--accent-color) !important;
}

/* Links inside success alerts should follow the alert foreground color */
html:not(.dark-mode) .alert.alert-success a {
  color: #111111 !important;
  text-decoration: underline;
}

html.dark-mode .alert.alert-success a {
  color: #ffffff !important;
  text-decoration: underline;
}

/* Ensure close button is visible in dark mode */
html.dark-mode .alert.alert-success .btn-close {
  filter: invert(1) grayscale(1);
  opacity: 0.9;
}

/* Keep the close button visible against white background too */
html:not(.dark-mode) .alert.alert-success .btn-close {
  opacity: 0.85;
}
/* -------------------------------------------------------------------------
   Light mode: accordion/section headers should be white fill
   ------------------------------------------------------------------------- */
html:not(.dark-mode) .accordion-button,
html:not(.dark-mode) .accordion-button:not(.collapsed),
html:not(.dark-mode) .accordion-header {
  background-color: #ffffff !important;
  color: #111111 !important;
}

/* Keep borders clean in light mode */
html:not(.dark-mode) .accordion-item {
  border-color: #d0d0d0 !important;
}

/* Hover state: subtle light gray */
html:not(.dark-mode) .accordion-button:hover {
  background-color: #f6f6f6 !important;
}

/* Remove Bootstrap focus glow; use accent border instead */
html:not(.dark-mode) .accordion-button:focus {
  box-shadow: none !important;
  border-color: var(--accent-color) !important;
}

/* -------------------------------------------------------------------------
   Accordion / expandable sections: stronger outer border
   ------------------------------------------------------------------------- */
.accordion-item {
  border: 5px solid #000000 !important;
  border-radius: 0.5rem;
  overflow: hidden; /* keeps header fill clipped to rounded corners */
}

/* Keep adjacent items spaced so borders don't visually merge */
.accordion-item + .accordion-item {
  margin-top: 0.75rem;
}

/* -------------------------------------------------------------------------
   Flatpickr (date picker) dark-mode visibility

   Mobile billables uses Flatpickr on a dark UI. Ensure the typed date text
   and calendar UI remain readable when dark mode is enabled.
   ------------------------------------------------------------------------- */

html.dark-mode .flatpickr-input,
html.dark-mode input.flatpickr-input,
html.dark-mode input.flatpickr-input[readonly] {
  background-color: #1e1e1e !important;
  color: #f1f1f1 !important;
  border-color: #3a3a3a !important;
}

html.dark-mode .flatpickr-calendar {
  background: #1e1e1e !important;
  color: #f1f1f1 !important;
  border-color: #333 !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.55) !important;
}

html.dark-mode .flatpickr-months,
html.dark-mode .flatpickr-month,
html.dark-mode .flatpickr-current-month,
html.dark-mode .flatpickr-weekdays,
html.dark-mode .flatpickr-weekday {
  background: #1e1e1e !important;
  color: #f1f1f1 !important;
}

html.dark-mode .flatpickr-day {
  color: #f1f1f1 !important;
}

html.dark-mode .flatpickr-day:hover,
html.dark-mode .flatpickr-day:focus {
  background: #2a2a2a !important;
  border-color: #2a2a2a !important;
}

html.dark-mode .flatpickr-day.selected,
html.dark-mode .flatpickr-day.startRange,
html.dark-mode .flatpickr-day.endRange,
html.dark-mode .flatpickr-day.selected:hover,
html.dark-mode .flatpickr-day.startRange:hover,
html.dark-mode .flatpickr-day.endRange:hover {
  background: var(--accent-color) !important;
  border-color: var(--accent-color) !important;
  color: #ffffff !important;
}

html.dark-mode .flatpickr-day.today {
  border-color: var(--accent-color) !important;
}

html.dark-mode .flatpickr-time,
html.dark-mode .flatpickr-time input,
html.dark-mode .flatpickr-time .flatpickr-am-pm {
  background: #1e1e1e !important;
  color: #f1f1f1 !important;
  border-color: #333 !important;
}