{% extends "base.html" %}
{% block title %}Edit Provider - Impact CMS{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h1 class="h4 mb-0">Edit Provider</h1>
      <div class="text-muted small">
        {{ provider.name }}
      </div>
    </div>
    <a href="{{ url_for('main.provider_detail', provider_id=provider.id) }}" class="btn btn-outline-secondary btn-sm">
      Back to Provider
    </a>
  </div>

  {% if error %}
    <div class="alert alert-danger py-2 small">
      {{ error }}
    </div>
  {% endif %}

  <div class="card shadow-sm">
    <div class="card-header">
      <h2 class="h6 mb-0">Provider Details</h2>
    </div>
    <div class="card-body">
      <form method="post" action="{{ url_for('main.provider_edit', provider_id=provider.id) }}">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label mb-1">Name</label>
            <input
              type="text"
              name="name"
              class="form-control form-control-sm"
              value="{{ provider.name or '' }}"
              required
            >
          </div>

          <div class="col-md-6">
            <label class="form-label mb-1">Phone</label>
            <input
              type="text"
              name="phone"
              class="form-control form-control-sm phone-input"
              inputmode="numeric"
              autocomplete="tel"
              maxlength="14"
              value="{{ provider.phone or '' }}"
            >
          </div>

          <div class="col-md-6">
            <label class="form-label mb-1">Fax</label>
            <input
              type="text"
              name="fax"
              class="form-control form-control-sm phone-input"
              inputmode="numeric"
              autocomplete="tel"
              maxlength="14"
              value="{{ provider.fax or '' }}"
            >
          </div>

          <div class="col-md-6">
            <label class="form-label mb-1">Email</label>
            <input
              type="email"
              name="email"
              class="form-control form-control-sm"
              value="{{ provider.email or '' }}"
            >
          </div>

          <div class="col-md-6">
            <label class="form-label mb-1">Address 1</label>
            <input
              type="text"
              name="address1"
              class="form-control form-control-sm"
              value="{{ provider.address1 or '' }}"
            >
          </div>

          <div class="col-md-6">
            <label class="form-label mb-1">Address 2</label>
            <input
              type="text"
              name="address2"
              class="form-control form-control-sm"
              value="{{ provider.address2 or '' }}"
            >
          </div>

          <div class="col-md-4">
            <label class="form-label mb-1">City</label>
            <input
              type="text"
              name="city"
              class="form-control form-control-sm"
              value="{{ provider.city or '' }}"
            >
          </div>

          <div class="col-md-4">
            <label class="form-label mb-1">State</label>
            <select name="state" class="form-select form-select-sm">
              {{ state_options(provider.state) }}
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label mb-1">Postal Code</label>
            <input
              type="text"
              name="postal_code"
              class="form-control form-control-sm"
              value="{{ provider.postal_code or '' }}"
            >
          </div>
        </div>

        <div class="mt-3 d-flex justify-content-end gap-2">
          <a
            href="{{ url_for('main.provider_detail', provider_id=provider.id) }}"
            class="btn btn-outline-secondary btn-sm"
          >
            Cancel
          </a>
          <button type="submit" class="btn btn-primary btn-sm">
            Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}